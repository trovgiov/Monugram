<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <h3>EXIF Orientation codes:</h3>
    <img src="http://www.daveperrett.com/images/articles/2012-07-28-exif-orientation-handling-is-a-ghetto/EXIF_Orientations.jpg" />

    <h3>Original base64 image (code 5):</h3>

    <h3>Original base64 image (code 5):</h3>
    <img id="image-original" src="/images/fi.jpg" style="display: none">

    <h3>Reset base64 image:</h3>
    <img id="image-reset" src="" />




<script>
function resetOrientation(srcBase64, srcOrientation, callback) {
var img = new Image();

img.onload = function() {
var width = img.width,
height = img.height,
canvas = document.createElement('canvas'),
ctx = canvas.getContext("2d");

// set proper canvas dimensions before transform & export
if ([5,6,7,8].indexOf(srcOrientation) > -1) {
canvas.width = height;
canvas.height = width;
} else {
canvas.width = width;
canvas.height = height;
}

// transform context before drawing image
switch (srcOrientation) {
case 2: ctx.transform(-1, 0, 0, 1, width, 0); break;
case 3: ctx.transform(-1, 0, 0, -1, width, height ); break;
case 4: ctx.transform(1, 0, 0, -1, 0, height ); break;
case 5: ctx.transform(0, 1, 1, 0, 0, 0); break;
case 6: ctx.transform(0, 1, -1, 0, height , 0); break;
case 7: ctx.transform(0, -1, -1, 0, height , width); break;
case 8: ctx.transform(0, -1, 1, 0, 0, width); break;
default: ctx.transform(1, 0, 0, 1, 0, 0);
}

// draw image
ctx.drawImage(img, 0, 0);

// export base64
callback(canvas.toDataURL());
};

img.src = srcBase64;
}

var originalImage = document.getElementById("image-original"),
resetImage = document.getElementById("image-reset");

resetOrientation(originalImage.src, 5, function(resetBase64Image) {
resetImage.src = resetBase64Image;
});

</script>

</html>